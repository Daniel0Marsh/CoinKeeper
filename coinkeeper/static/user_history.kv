<UserHistoryScreen>:

    BoxLayout:
        orientation: 'vertical'

        MDTopAppBar:
            title: 'CoinKeeper'
            elevation: 2
            right_action_items: [["home", lambda x: app.change_screen("home")], ["logout-variant", lambda x: app.change_screen("login")]]


        BoxLayout:
            orientation: "vertical"
            spacing: "8dp"

            ScrollView:
                do_scroll_y: True
                effect_cls: 'ScrollEffect'
                bar_width: 0  # Increase the width of the scroll bar
                size_hint_y: None
                height: self.parent.height

                MDBoxLayout:
                    adaptive_height: True
                    orientation: 'vertical'
                    padding: "8dp"
                    spacing: "8dp"

                    MDCard:
                        size_hint: 1, None
                        size: "300dp", "520dp"
                        pos_hint: {"center_x": .5}
                        elevation: 2
                        padding: "8dp"
                        spacing: "8dp"
                        md_bg_color: app.theme_cls.bg_dark if app.theme_cls.theme_style == 'Dark' else app.theme_cls.bg_light

                        BoxLayout:
                            orientation: "vertical"
                            spacing: "8dp"
                            pos_hint: {"center_y": .5}

                            BoxLayout:
                                orientation: "horizontal"
                                spacing: "8dp"
                                pos_hint: {"center_y": .5}

                                MDBoxLayout:
                                    size_hint: (None, 1)
                                    width: dp(120)
                                    MDLabel:
                                        text: "User History"
                                        font_style: "H6"
                                        theme_text_color: "Primary" if app.theme_cls.theme_style == 'Dark' else "Secondary"

                                MDBoxLayout:
                                    size_hint: (None, 1)
                                    width: self.minimum_width
                                    MDRoundFlatButton:
                                        text: "Download all"
                                        on_release: root.download()

                            ScrollView:
                                do_scroll_y: True
                                effect_cls: 'ScrollEffect'
                                bar_width: 0  # Increase the width of the scroll bar
                                size_hint_y: None
                                height: self.parent.height - dp(40)  # Adjust the height based on label height

                                BoxLayout:
                                    id: table
                                    adaptive_height: True
                                    orientation: "vertical"
                                    halign: "center"
